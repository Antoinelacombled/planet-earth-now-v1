import{useCallback as e,useEffect as t,useState as n,useMemo as r,useRef as o}from"react";import c from"@studio-freight/tempus";import i from"just-debounce-it";import{create as s}from"zustand";function u(n,r){const o=e(e=>{n.current&&!n.current.contains(e.target)&&r()},[n,r]);t(()=>{if(n.current)return document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}},[o,n])}function a(){const[e,r]=n(!1);return t(()=>{r(!0)},[]),e}function d(){const e=a();return r(()=>{if(!e)return;const t=window.location,n=t.href,r=new URLSearchParams(t.search),o=n.includes("#debug")||n.includes("/_debug")||r.has("debug")||"development"===process.env.NODE_ENV,c=n.includes("#production")||r.has("production");return o&&!c},[e])}function f(){const[e,r]=n();return t(()=>{function e(){r(document.readyState)}return document.addEventListener("readystatechange",e,!1),e(),()=>document.removeEventListener("readystatechange",e,!1)},[]),e}function l(e,n=0){t(()=>{if(e)return c.add(e,n),()=>c.remove(e)},[e,n])}function m({root:r=null,rootMargin:c="0px",threshold:i=0,once:s=!1,lazy:u=!1,callback:a=(()=>{})}={},d=[]){const f=o({}),[l,m]=n({}),[v,h]=n();t(()=>{if(!v)return;const e=new IntersectionObserver(([t])=>{u?f.current=t:m(t),a(t),s&&t.isIntersecting&&e.disconnect()},{root:r,rootMargin:c,threshold:i});return e.observe(v),()=>{e.disconnect()}},[v,r,c,i,u,s,...d]);const b=e(()=>f.current,[]);return[h,u?b:l]}function v(e,n=1e3,r=[]){t(()=>{const t=setInterval(e,n);return()=>clearInterval(t)},[n,...r])}function h(){const[e,r]=n();return t(()=>{function e(){r("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)}return window.addEventListener("resize",e,!1),e(),()=>{window.removeEventListener("resize",e,!1)}},[]),e}function b(e){const[r,o]=n();return t(()=>{const t=window.matchMedia(e);function n(){o(t.matches)}return t.addEventListener("change",n,!1),n(),()=>t.removeEventListener("change",n,!1)},[e]),r}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function w({lazy:r=!1,debounce:c=500,box:s="border-box",callback:u=(()=>{})}={},a=[]){const d=o({}),[f,l]=n({}),[m,v]=n();t(()=>{if(!m)return;const e=i(([e])=>{d.current=e,u(e),r||l(e)},c,!0),t=new ResizeObserver(e);return t.observe(m,{box:s}),()=>{t.disconnect(),e.cancel()}},[m,r,c,s,...a]);const h=e(()=>d.current,[]);return[v,r?h:f]}function g(e){"sticky"===getComputedStyle(e).position&&(e.style.setProperty("position","static"),e.dataset.sticky="true"),e.offsetParent&&g(e.offsetParent)}function y(e){var t;"true"===(null==e||null==(t=e.dataset)?void 0:t.sticky)&&(e.style.removeProperty("position"),e.dataset.sticky="true",delete e.dataset.sticky),e.parentNode&&y(e.parentNode)}function E(e,t=0){const n=t+e.offsetTop;return e.offsetParent?E(e.offsetParent,n):n}function z(e,t=0){const n=t+e.offsetLeft;return e.offsetParent?z(e.offsetParent,n):n}function P(e,t=0){const n=t+e.scrollTop;return e.offsetParent?P(e.offsetParent,n):n+window.scrollY}function L(e,t=0){const n=t+e.scrollLeft;return e.offsetParent?L(e.offsetParent,n):n+window.scrollX}const k=s(e=>({elements:[],addElement:t=>{e(e=>({elements:[...e.elements,t]}))},removeElement:t=>{e(e=>({elements:e.elements.filter(e=>e!==t)}))}}));function S({ignoreTransform:r=!1,ignoreSticky:c=!0,lazy:s=!1,debounce:u=500,resizeDebounce:a=u,callback:d=(()=>{})}={},f=[]){const[l,m]=n(),[v,h]=n({}),b=o({}),[S]=w({lazy:!0,debounce:a,callback:e=>{const t=e.borderBoxSize[0].inlineSize,n=e.borderBoxSize[0].blockSize;b.current.width=t,b.current.height=n,d(b.current),s||h(e=>p({},e,{width:t,height:n}))}},[s,a,...f]),x=k(({elements:e})=>e);t(()=>{if(!l)return;const e=i(()=>{let e,t;if(c&&g(l),r)e=E(l),t=z(l);else{const n=l.getBoundingClientRect();e=n.top+P(l),t=n.left+L(l)}c&&y(l),b.current.top=e,b.current.left=t,d(b.current),s||h(n=>p({},n,{top:e,left:t}))},u,!0),t=new ResizeObserver(e);return t.observe(document.body),x.forEach(e=>{t.observe(e)}),()=>{t.disconnect(),e.cancel()}},[l,s,u,r,c,x,...f]);const O=e(()=>b.current,[]);return[e=>{m(e),S(e)},s?O:v]}function x(e=[],t=[]){const n=r(()=>t&&[t].flat(),[t]),o=r(()=>e&&[e].flat(),[e]);return r(()=>{if(!n||!o)return;const t=o.map(e=>{var t;return null==(t=n.find(t=>t.type===e))?void 0:t.props.children});return e[0]?t:t[0]},[n,o])}function O(e=500){const[r,o]=n(),[c,s]=n();return t(()=>{const t=i(()=>{o(Math.min(window.innerWidth,document.documentElement.clientWidth)),s(Math.min(window.innerHeight,document.documentElement.clientHeight))},e,!0);return window.addEventListener("resize",t,!1),t(),()=>window.removeEventListener("resize",t,!1)},[e]),{width:r,height:c}}S.observe=function(e){k.getState().addElement(e)},S.unobserve=function(e){k.getState().removeElement(e)};export{d as useDebug,f as useDocumentReadyState,l as useFrame,m as useIntersectionObserver,v as useInterval,a as useIsClient,h as useIsTouchDevice,b as useMediaQuery,u as useOutsideClickEvent,S as useRect,w as useResizeObserver,x as useSlots,O as useWindowSize};
//# sourceMappingURL=hamo.modern.mjs.map
