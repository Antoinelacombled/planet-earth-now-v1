import{useCallback as n,useEffect as t,useState as e,useMemo as r,useRef as o}from"react";import i from"@studio-freight/tempus";import c from"just-debounce-it";import{create as u}from"zustand";function a(e,r){var o=n(function(n){e.current&&!e.current.contains(n.target)&&r()},[e,r]);t(function(){if(e.current)return document.addEventListener("mousedown",o),function(){document.removeEventListener("mousedown",o)}},[o,e])}function f(){var n=e(!1),r=n[0],o=n[1];return t(function(){o(!0)},[]),r}function d(){var n=f();return r(function(){if(n){var t=window.location,e=t.href,r=new URLSearchParams(t.search),o=e.includes("#debug")||e.includes("/_debug")||r.has("debug")||"development"===process.env.NODE_ENV,i=e.includes("#production")||r.has("production");return o&&!i}},[n])}function v(){var n=e(),r=n[0],o=n[1];return t(function(){function n(){o(document.readyState)}return document.addEventListener("readystatechange",n,!1),n(),function(){return document.removeEventListener("readystatechange",n,!1)}},[]),r}function s(n,e){void 0===e&&(e=0),t(function(){if(n)return i.add(n,e),function(){return i.remove(n)}},[n,e])}function l(r,i){var c=void 0===r?{}:r,u=c.root,a=void 0===u?null:u,f=c.rootMargin,d=void 0===f?"0px":f,v=c.threshold,s=void 0===v?0:v,l=c.once,m=void 0!==l&&l,h=c.lazy,b=void 0!==h&&h,p=c.callback,w=void 0===p?function(){}:p;void 0===i&&(i=[]);var g=o({}),y=e({}),E=y[0],z=y[1],P=e(),L=P[0],k=P[1];t(function(){if(L){var n=new IntersectionObserver(function(t){var e=t[0];b?g.current=e:z(e),w(e),m&&e.isIntersecting&&n.disconnect()},{root:a,rootMargin:d,threshold:s});return n.observe(L),function(){n.disconnect()}}},[L,a,d,s,b,m].concat(i));var S=n(function(){return g.current},[]);return[k,b?S:E]}function m(n,e,r){void 0===e&&(e=1e3),void 0===r&&(r=[]),t(function(){var t=setInterval(n,e);return function(){return clearInterval(t)}},[e].concat(r))}function h(){var n=e(),r=n[0],o=n[1];return t(function(){function n(){o("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)}return window.addEventListener("resize",n,!1),n(),function(){window.removeEventListener("resize",n,!1)}},[]),r}function b(n){var r=e(),o=r[0],i=r[1];return t(function(){var t=window.matchMedia(n);function e(){i(t.matches)}return t.addEventListener("change",e,!1),e(),function(){return t.removeEventListener("change",e,!1)}},[n]),o}function p(){return p=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},p.apply(this,arguments)}function w(r,i){var u=void 0===r?{}:r,a=u.lazy,f=void 0!==a&&a,d=u.debounce,v=void 0===d?500:d,s=u.box,l=void 0===s?"border-box":s,m=u.callback,h=void 0===m?function(){}:m;void 0===i&&(i=[]);var b=o({}),p=e({}),w=p[0],g=p[1],y=e(),E=y[0],z=y[1];t(function(){if(E){var n=c(function(n){var t=n[0];b.current=t,h(t),f||g(t)},v,!0),t=new ResizeObserver(n);return t.observe(E,{box:l}),function(){t.disconnect(),n.cancel()}}},[E,f,v,l].concat(i));var P=n(function(){return b.current},[]);return[z,f?P:w]}function g(n){"sticky"===getComputedStyle(n).position&&(n.style.setProperty("position","static"),n.dataset.sticky="true"),n.offsetParent&&g(n.offsetParent)}function y(n){var t;"true"===(null==n||null==(t=n.dataset)?void 0:t.sticky)&&(n.style.removeProperty("position"),n.dataset.sticky="true",delete n.dataset.sticky),n.parentNode&&y(n.parentNode)}function E(n,t){void 0===t&&(t=0);var e=t+n.offsetTop;return n.offsetParent?E(n.offsetParent,e):e}function z(n,t){void 0===t&&(t=0);var e=t+n.offsetLeft;return n.offsetParent?z(n.offsetParent,e):e}function P(n,t){void 0===t&&(t=0);var e=t+n.scrollTop;return n.offsetParent?P(n.offsetParent,e):e+window.scrollY}function L(n,t){void 0===t&&(t=0);var e=t+n.scrollLeft;return n.offsetParent?L(n.offsetParent,e):e+window.scrollX}var k=u(function(n){return{elements:[],addElement:function(t){n(function(n){return{elements:[].concat(n.elements,[t])}})},removeElement:function(t){n(function(n){return{elements:n.elements.filter(function(n){return n!==t})}})}}});function S(r,i){var u=void 0===r?{}:r,a=u.ignoreTransform,f=void 0!==a&&a,d=u.ignoreSticky,v=void 0===d||d,s=u.lazy,l=void 0!==s&&s,m=u.debounce,h=void 0===m?500:m,b=u.resizeDebounce,S=void 0===b?h:b,x=u.callback,O=void 0===x?function(){}:x;void 0===i&&(i=[]);var M=e(),T=M[0],j=M[1],I=e({}),N=I[0],R=I[1],B=o({}),C=w({lazy:!0,debounce:S,callback:function(n){var t=n.borderBoxSize[0].inlineSize,e=n.borderBoxSize[0].blockSize;B.current.width=t,B.current.height=e,O(B.current),l||R(function(n){return p({},n,{width:t,height:e})})}},[l,S].concat(i)),D=C[0],H=k(function(n){return n.elements});t(function(){if(T){var n=c(function(){var n,t;if(v&&g(T),f)n=E(T),t=z(T);else{var e=T.getBoundingClientRect();n=e.top+P(T),t=e.left+L(T)}v&&y(T),B.current.top=n,B.current.left=t,O(B.current),l||R(function(e){return p({},e,{top:n,left:t})})},h,!0),t=new ResizeObserver(n);return t.observe(document.body),H.forEach(function(n){t.observe(n)}),function(){t.disconnect(),n.cancel()}}},[T,l,h,f,v,H].concat(i));var W=n(function(){return B.current},[]);return[function(n){j(n),D(n)},l?W:N]}function x(n,t){void 0===n&&(n=[]),void 0===t&&(t=[]);var e=r(function(){return t&&[t].flat()},[t]),o=r(function(){return n&&[n].flat()},[n]);return r(function(){if(e&&o){var t=o.map(function(n){var t;return null==(t=e.find(function(t){return t.type===n}))?void 0:t.props.children});return n[0]?t:t[0]}},[e,o])}function O(n){void 0===n&&(n=500);var r=e(),o=r[0],i=r[1],u=e(),a=u[0],f=u[1];return t(function(){var t=c(function(){i(Math.min(window.innerWidth,document.documentElement.clientWidth)),f(Math.min(window.innerHeight,document.documentElement.clientHeight))},n,!0);return window.addEventListener("resize",t,!1),t(),function(){return window.removeEventListener("resize",t,!1)}},[n]),{width:o,height:a}}S.observe=function(n){k.getState().addElement(n)},S.unobserve=function(n){k.getState().removeElement(n)};export{d as useDebug,v as useDocumentReadyState,s as useFrame,l as useIntersectionObserver,m as useInterval,f as useIsClient,h as useIsTouchDevice,b as useMediaQuery,a as useOutsideClickEvent,S as useRect,w as useResizeObserver,x as useSlots,O as useWindowSize};
//# sourceMappingURL=hamo.mjs.map
