import{useFrame as r}from"@studio-freight/hamo";import n from"@studio-freight/lenis";import t from"prop-types";import o,{createContext as e,forwardRef as a,useRef as i,useState as c,useCallback as l,useImperativeHandle as u,useEffect as f,useContext as s}from"react";import{create as m}from"zustand";import d from"clsx";function p(){return p=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},p.apply(this,arguments)}var v=["children","root","options","autoRaf","rafPriority","className"],b=e(),y=m(function(){return{}});function h(r,n,t){void 0===n&&(n=[]),void 0===t&&(t=0);var o,e,a=(o=s(b),e=y(),null!=o?o:e),i=a.lenis,c=a.addCallback,l=a.removeCallback;return f(function(){if(r&&c&&l&&i)return c(r,t),r(i),function(){l(r)}},[i,c,l,t].concat(n)),i}var g=a(function(t,e){var a=t.children,s=t.root,m=void 0!==s&&s,h=t.options,g=void 0===h?{}:h,N=t.autoRaf,k=void 0===N||N,O=t.rafPriority,C=void 0===O?0:O,j=t.className,P=function(r,n){if(null==r)return{};var t,o,e={},a=Object.keys(r);for(o=0;o<a.length;o++)n.indexOf(t=a[o])>=0||(e[t]=r[t]);return e}(t,v),R=i(),w=i(),x=c(),E=x[0],L=x[1],S=i([]),z=l(function(r,n){S.current.push({callback:r,priority:n}),S.current.sort(function(r,n){return r.priority-n.priority})},[]),J=l(function(r){S.current=S.current.filter(function(n){return n.callback!==r})},[]);u(e,function(){return E},[E]),f(function(){var r=new n(p({},g,!m&&{wrapper:R.current,content:w.current}));return L(r),function(){r.destroy(),L(void 0)}},[m,JSON.stringify(g)]),r(function(r){k&&(null==E||E.raf(r))},C),f(function(){m&&E&&y.setState({lenis:E,addCallback:z,removeCallback:J})},[m,E,z,J]);var T=l(function(r){for(var n=0;n<S.current.length;n++)S.current[n].callback(r)},[]);f(function(){return null==E||E.on("scroll",T),function(){null==E||E.off("scroll",T)}},[E,T]);var q=l(function(){R.current&&(R.current.className=d(null==E?void 0:E.className,j))},[E,j]);return f(function(){return q(),null==E||E.on("className change",q),function(){null==E||E.off("className change",q)}},[E,q]),/*#__PURE__*/o.createElement(b.Provider,{value:{lenis:E,addCallback:z,removeCallback:J}},m?a:/*#__PURE__*/o.createElement("div",p({ref:R,className:d(null==E?void 0:E.className,j)},P),/*#__PURE__*/o.createElement("div",{ref:w},a)))});g.displayName="ReactLenis",g.propTypes={children:t.node,root:t.bool,options:t.object,autoRaf:t.bool,rafPriority:t.number,className:t.string};export{g as Lenis,b as LenisContext,g as ReactLenis,h as useLenis};
//# sourceMappingURL=react-lenis.mjs.map
