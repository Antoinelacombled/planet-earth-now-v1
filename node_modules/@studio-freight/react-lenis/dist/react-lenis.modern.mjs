import{useFrame as r}from"@studio-freight/hamo";import e from"@studio-freight/lenis";import t from"prop-types";import n,{createContext as o,forwardRef as a,useRef as l,useState as c,useCallback as i,useImperativeHandle as s,useEffect as u,useContext as f}from"react";import{create as m}from"zustand";import p from"clsx";function d(){return d=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},d.apply(this,arguments)}const b=["children","root","options","autoRaf","rafPriority","className"],y=o(),h=m(()=>({}));function v(r,e=[],t=0){const{lenis:n,addCallback:o,removeCallback:a}=function(){const r=f(y),e=h();return null!=r?r:e}();return u(()=>{if(r&&o&&a&&n)return o(r,t),r(n),()=>{a(r)}},[n,o,a,t,...e]),n}const g=a((t,o)=>{let{children:a,root:f=!1,options:m={},autoRaf:v=!0,rafPriority:g=0,className:N}=t,k=function(r,e){if(null==r)return{};var t,n,o={},a=Object.keys(r);for(n=0;n<a.length;n++)e.indexOf(t=a[n])>=0||(o[t]=r[t]);return o}(t,b);const O=l(),C=l(),[j,P]=c(),R=l([]),w=i((r,e)=>{R.current.push({callback:r,priority:e}),R.current.sort((r,e)=>r.priority-e.priority)},[]),x=i(r=>{R.current=R.current.filter(e=>e.callback!==r)},[]);s(o,()=>j,[j]),u(()=>{const r=new e(d({},m,!f&&{wrapper:O.current,content:C.current}));return P(r),()=>{r.destroy(),P(void 0)}},[f,JSON.stringify(m)]),r(r=>{v&&(null==j||j.raf(r))},g),u(()=>{f&&j&&h.setState({lenis:j,addCallback:w,removeCallback:x})},[f,j,w,x]);const E=i(r=>{for(let e=0;e<R.current.length;e++)R.current[e].callback(r)},[]);u(()=>(null==j||j.on("scroll",E),()=>{null==j||j.off("scroll",E)}),[j,E]);const L=i(()=>{O.current&&(O.current.className=p(null==j?void 0:j.className,N))},[j,N]);return u(()=>(L(),null==j||j.on("className change",L),()=>{null==j||j.off("className change",L)}),[j,L]),/*#__PURE__*/n.createElement(y.Provider,{value:{lenis:j,addCallback:w,removeCallback:x}},f?a:/*#__PURE__*/n.createElement("div",d({ref:O,className:p(null==j?void 0:j.className,N)},k),/*#__PURE__*/n.createElement("div",{ref:C},a)))});g.displayName="ReactLenis",g.propTypes={children:t.node,root:t.bool,options:t.object,autoRaf:t.bool,rafPriority:t.number,className:t.string};export{g as Lenis,y as LenisContext,g as ReactLenis,v as useLenis};
//# sourceMappingURL=react-lenis.modern.mjs.map
